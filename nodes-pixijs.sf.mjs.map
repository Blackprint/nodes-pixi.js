{"version":3,"names":["window","templates","_$_","sf","dom","$","__tmplt","_sf_internal","body_map","_replace","path","html","h","this","remove","reinitViews","append","document","body","apply","arguments","prepend","Blackprint","loadScope","url","PIXI","DepsLoader","js","local","cdn","Context","getContext","Sketch","registerInterface","IFace","Canvas","init","el","super","canvas","insertBefore","$el","initClone","app","Renderer","width","height","view","My","onPixiTicker","render","container","ticker","add","hotReloaded","initEvent","destroyClone","destroy"],"sources":["src/_init.sf","src/Display/Canvas.sf"],"sourcesContent":[".js will run first before .sf\n\n## js-global\n// This script will run first, and then the other .sf files\n// depends on blackprint.config.js configuration\n\n// Because .js and .sf is separated\n// we also need to call loadScope just like _init.js\nlet Blackprint = window.Blackprint.loadScope({\n\t// You can find the URL on Blackprint menu -> Modules\n\t// This will also be exported to JSON if this module's nodes is being used\n\turl: import.meta.url,\n});\n\n// Load dependencies and wait until everything ready\n// This will return same module reference if already being loaded on ./init.js\nvar [ PIXI ] = await Blackprint.DepsLoader.js({\n\twindow: ['PIXI'],\n\n\t// need to use 'npm install' first or must exist on node_modules, will dynamically imported\n\tlocal: ['pixi.js'],\n\n\t// for browser, Deno, or supported environment that have internet access\n\tcdn: [\n\t\t\"https://cdn.jsdelivr.net/npm/pixi.js@8.14.0/dist/pixi.min.mjs\",\n\t]\n});\n\n// Use sQuery\nlet $ = sf.$;\n\n// Global shared context (wait it to avoid race condition)\nlet Context = await Blackprint.getContext('Pixi.js');","## html\n<div class=\"node\" style=\"transform: translate({{ x }}px, {{ y }}px)\">\n  <sf-template path=\"Blackprint/nodes/template/routes.sf\"></sf-template>\n  <sf-template path=\"Blackprint/nodes/template/header.sf\"></sf-template>\n\n  <div class=\"content\">\n    <div class=\"left-port\">\n      <sf-template path=\"Blackprint/nodes/template/input-port.sf\"></sf-template>\n    </div>\n\n    <div class=\"right-port\">\n      <sf-template path=\"Blackprint/nodes/template/output-port.sf\"></sf-template>\n    </div>\n  </div>\n\n  <sf-template path=\"Blackprint/nodes/template/other.sf\"></sf-template>\n</div>\n\n## scss-global\nbpic-pixi-js-display-canvas {\n\t.content{\n\t\tmargin-top: 0 !important;\n\t}\n\tcanvas{\n\t\twidth: 280px;\n\t\tmax-height: 240px;\n\t\tdisplay: block;\n\t\tborder-bottom: 1px dashed white;\n\t\tmargin-bottom: 2px;\n\t}\n}\n\n\n## js-global\nBlackprint.Sketch.registerInterface('BPIC/Pixi.js/Display/Canvas',\nclass CanvasIFace extends Context.IFace.Canvas {\n\tasync init(el){\n\t\tawait super.init(el);\n\n\t\t$(this.canvas).insertBefore(this.$el('.left-port')[0]);\n\t}\n\n\t// If current component is being used on multiple container\n\tinitClone(el){\n\t\tvar app = new PIXI.Renderer({ width: this.canvas.width, height: this.canvas.height });\n\t\t$(app.view).insertBefore($('.left-port', el)[0]);\n\n\t\tlet My = this;\n\n\t\t// For destroying\n\t\tel.app = app;\n\t\tel.onPixiTicker = function(){\n\t\t\tapp.render(My.container);\n\t\t}\n\n\t\tthis.app.ticker.add(el.onPixiTicker);\n\t}\n\n\thotReloaded(){\n\t\tthis.initEvent();\n\t}\n\n\tdestroyClone(el){\n\t\t// Destroy cloned Pixi App\n\t\tel.app?.destroy();\n\n\t\tthis.app.ticker.remove(el.onPixiTicker);\n\t}\n});"],"mappings":"8HAEAA,EAAAC,YAAAD,EAAAC,UAAA,QAAAC,EAAAC,GAAAC,KAAAD,GAAAE,EAAAC,EAAAN,EAAAC,UAAAD,EAAAO,aAAAP,EAAAO,cAAA,CAAAC,SAAA,GAAAC,SAAAC,EAAAC,GAAA,IAAAC,EAAAV,EAAAS,GAAA,OAAAE,KAAAL,SAAAE,IAAAG,KAAAL,SAAAE,GAAAI,SAAAD,KAAAE,aAAAF,KAAAE,YAAAH,GAAAC,KAAAL,SAAAE,GAAAE,CAAA,EAAAI,OAAAN,EAAAC,GAAAT,EAAAe,SAAAC,MAAAF,OAAAH,KAAAJ,SAAAU,MAAAN,KAAAO,WAAA,EAAAC,QAAAX,EAAAC,GAAAT,EAAAe,SAAAC,MAAAG,QAAAR,KAAAJ,SAAAU,MAAAN,KAAAO,WAAA,GAKA,IAAAE,EAAAtB,EAAAsB,WAAAC,UAAA,CAGAC,sBAKA,IAAAC,SAAAH,EAAAI,WAAAC,GAAA,CACA3B,OAAA,SAGA4B,MAAA,YAGAC,IAAA,CACA,mEAKA,IAAAxB,EAAAF,GAAAE,EAGAyB,QAAAR,EAAAS,WAAA,W,0iBCGAT,EAAAU,OAAAC,kBAAA,8BACA,cAAAH,EAAAI,MAAAC,OACA,UAAAC,CAAAC,SACAC,MAAAF,KAAAC,GAEAhC,EAAAQ,KAAA0B,QAAAC,aAAA3B,KAAA4B,IAAA,iBACA,CAGAC,UAAAL,GACA,IAAAM,EAAA,IAAAlB,EAAAmB,SAAA,CAAAC,MAAAhC,KAAA0B,OAAAM,MAAAC,OAAAjC,KAAA0B,OAAAO,SACAzC,EAAAsC,EAAAI,MAAAP,aAAAnC,EAAA,aAAAgC,GAAA,IAEA,IAAAW,EAAAnC,KAGAwB,EAAAM,MACAN,EAAAY,aAAA,WACAN,EAAAO,OAAAF,EAAAG,UACA,EAEAtC,KAAA8B,IAAAS,OAAAC,IAAAhB,EAAAY,aACA,CAEAK,cACAzC,KAAA0C,WACA,CAEAC,aAAAnB,GAEAA,EAAAM,KAAAc,UAEA5C,KAAA8B,IAAAS,OAAAtC,OAAAuB,EAAAY,aACA,G","ignoreList":[]}